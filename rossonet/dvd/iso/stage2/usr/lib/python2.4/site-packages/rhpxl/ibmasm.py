#
# ibmasm.py - finds the IBM Advanced System Management PCI adapter card
#
# Copyright 2007 IBM Corp.
#
# This software may be freely redistributed under the terms of the GNU
# library public license.
#
# You should have received a copy of the GNU Library Public License
# along with this program; if not, write to the Free Software
# Foundation, Inc., 675 Mass Ave, Cambridge, MA 02139, USA.
#
import kudzu

class ibmasmCheck:
    def isDevicePresent(self):
        return self.deviceExist

    def probe (self):
        lst = kudzu.probe(kudzu.CLASS_UNSPEC, kudzu.BUS_PCI,
                          kudzu.PROBE_ALL)

        for card in lst:
            (device, driver, descr) = card
            if descr == "IBM Remote Supervisor Adapter (RSA)":
                self.deviceExist = 1

    def __init__ (self):
        self.deviceExist = 0 
        self.probe()
